<!-- Real-time notifications (disabled - WebSocket server not configured) -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // WebSocket notifications are disabled since the server doesn't support WebSockets
    console.log('Notification system: WebSocket disabled - using fallback notifications only');
    
    // Create toast container for manual notifications if needed
    function createToastContainer() {
        let toastContainer = document.getElementById('toast-container');
        if (!toastContainer) {
            toastContainer = document.createElement('div');
            toastContainer.id = 'toast-container';
            toastContainer.className = 'toast-container position-fixed top-0 end-0 p-3';
            toastContainer.style.zIndex = '1055';
            document.body.appendChild(toastContainer);
        }
        return toastContainer;
    }
    
    // Function to manually show notifications (can be called from other scripts)
    window.showNotification = function(message) {
        // Wait for Bootstrap to be loaded
        function waitForBootstrap() {
            return new Promise((resolve) => {
                if (typeof bootstrap !== 'undefined') {
                    resolve();
                } else {
                    setTimeout(() => {
                        waitForBootstrap().then(resolve);
                    }, 100);
                }
            });
        }

        waitForBootstrap().then(() => {
            try {
                // Create toast notification
                const title = message.title || 'Notification';
                const msg = message.message || message;
                
                const toastHtml = `
                    <div class="toast align-items-center text-white bg-primary border-0" role="alert" aria-live="assertive" aria-atomic="true">
                        <div class="d-flex">
                            <div class="toast-body">
                                <strong>${title}</strong><br>
                                ${msg}
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                        </div>
                    </div>
                `;
                
                const toastContainer = createToastContainer();
                toastContainer.insertAdjacentHTML('beforeend', toastHtml);
                
                // Show the toast
                const toastElement = toastContainer.lastElementChild;
                if (typeof bootstrap !== 'undefined' && bootstrap.Toast) {
                    const toast = new bootstrap.Toast(toastElement, { delay: 5000 });
                    toast.show();
                    
                    // Remove from DOM after hiding
                    toastElement.addEventListener('hidden.bs.toast', function() {
                        toastElement.remove();
                    });
                } else {
                    // Fallback: just show and auto-remove after delay
                    setTimeout(() => {
                        toastElement.remove();
                    }, 5000);
                }
            } catch (err) {
                console.error('Error showing notification:', err);
            }
        });
    };

    {% if user.is_authenticated %}
    // Notification system is available but WebSocket is disabled
    console.log('User authenticated - manual notification system ready');
    {% endif %}
});
</script>
</script>
